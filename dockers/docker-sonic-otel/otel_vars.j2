{%- set device_metadata = DEVICE_METADATA | default({}) -%}
{%- set hostname = device_metadata.localhost.hostname | default('sonic-switch') -%}

receivers:
  otlp:
    protocols:
      grpc:
        endpoint: "0.0.0.0:4317"
      http:
        endpoint: "0.0.0.0:4318"

processors:
  batch:
    timeout: 1s
    send_batch_size: 1000

exporters:
  debug:
    verbosity: detailed

  # Template for InfluxDB exporters - can be configured externally
  # Examples of what could be configured:
  #
  # influxdb:
  #   endpoint: ${INFLUXDB_PORTS_ENDPOINT:-http://localhost:8086}
  #   org: ${INFLUXDB_ORG:-default}
  #   bucket: ${INFLUXDB_PORTS_BUCKET:-home}
  #   token: ${INFLUXDB_PORTS_TOKEN}
  #   timeout: 10s
  
service:
  telemetry:
    logs:
      level: "debug"

  pipelines:
    metrics:
      receivers: [otlp]
      processors: [batch]
      exporters: [debug]

    logs:
      receivers: [otlp]
      processors: [batch]
      exporters: [debug]

    traces:
      receivers: [otlp]
      processors: [batch]
      exporters: [debug]
